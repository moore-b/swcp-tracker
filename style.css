body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
#app-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: url('background.webp'); background-size: cover; background-position: center center; z-index: -1; }
#map { height: 700px; width: 100%; border-radius: 0.5rem; position: relative; }
.activity-map { height: 200px; width: 100%; border-radius: 0.5rem; background-color: #f3f4f6; }
.btn-base { font-weight: 700 !important; padding: 0.5rem 0.75rem !important; border-radius: 0.5rem !important; transform-origin: center !important; transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1) !important; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important; outline: none !important; border: none !important; cursor: pointer !important; }
.btn-base:hover { transform: scale(1.05) !important; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important; }
.btn-base:disabled { background-color: #d1d5db !important; cursor: not-allowed; }
.btn-strava { background-color: #FC5200; color: white; }
.btn-strava:hover { background-color: #e04a00; }
.btn-primary { background-color: #3b82f6; color: white; }
.btn-primary:hover { background-color: #2563eb; }
.btn-secondary { background-color: #10b981; color: white; }
.btn-secondary:hover { background-color: #059669; }
.btn-danger { color: #ef4444; }
.btn-danger:hover { color: #dc2626; text-decoration: underline; }
.loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; display: inline-block; margin-right: 10px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
.filter-btn { padding: 0.5rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; background-color: #ffffff; transition: background-color 0.2s; }
.filter-btn:hover { background-color: #f3f4f6; }
.filter-btn.active { background-color: #3b82f6; color: #ffffff; border-color: #3b82f6; }
.blurred-tile-background { background-color: rgba(255, 255, 255, 0.7) !important; backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); box-shadow: 0 12px 20px -3px rgba(0, 0, 0, 0.1), 0 6px 10px -2px rgba(0, 0, 0, 0.05); }

/* DESKTOP LAYOUT (Default) */
#main-layout-container { display: grid; grid-template-columns: 2fr 1fr; grid-template-rows: auto auto 1fr auto; gap: 1rem; min-height: 100vh; padding: 1rem; }
#header-section { grid-column: 1; grid-row: 1; }
#progress-summary-section { grid-column: 1; grid-row: 2; }
#map-section { grid-column: 1; grid-row: 3; }
#status-log-section-container { grid-column: 1; grid-row: 4; }
#activities-drawer { grid-column: 2; grid-row: 1 / span 4; position: sticky; top: 1rem; height: calc(100vh - 2rem); overflow-y: auto; }
#mobile-header { display: none; } /* Hide mobile header on desktop */

/* MOBILE LAYOUT */
@media (max-width: 1024px) {
    body {
        overflow: hidden; /* Prevent body scroll when drawer is open */
    }
    #main-layout-container {
        display: flex; /* Use flexbox for simple stacking */
        flex-direction: column;
        padding: 0; /* Remove overall padding */
        min-height: 100vh;
        position: relative; /* For drawer positioning context */
    }

    #mobile-header {
        display: flex; /* Show mobile header */
        width: 100%;
        position: sticky;
        top: 0;
        z-index: 20; /* Above map */
    }
   
    #header-section,
    #progress-summary-section,
    #status-log-section-container {
        display: none !important; /* Hide these sections by default on mobile */
    }

    #map-section {
        flex-grow: 1; /* Map takes remaining vertical space */
        height: auto; /* Allow map to adjust height */
        padding: 0.5rem; /* Small padding around map */
    }
    #map {
        height: calc(100vh - 60px); /* Adjust map height to fill viewport minus header */
        border-radius: 0; /* Remove border-radius on map for full screen look */
    }

    /* ACTIVITIES DRAWER STYLING */
    #activities-drawer {
        position: fixed;
        top: 0;
        right: 0;
        width: 85%; /* Make it less than 100% to show background */
        max-width: 380px; /* Cap max width on larger mobile devices */
        height: 100vh;
        background-color: #f3f4f6; /* Match body background or slightly different */
        box-shadow: -4px 0 15px rgba(0,0,0,0.2);
        transform: translateX(100%); /* Hidden by default */
        transition: transform 0.3s ease-out;
        z-index: 30; /* Higher than map and mobile header */
        overflow-y: auto; /* Enable scrolling for activities list */
        padding: 1rem; /* Padding inside the drawer */
        border-radius: 0; /* No border radius for full height slide */
    }

    #activities-drawer.open {
        transform: translateX(0); /* Visible when open */
    }

    #activities-section { /* The content inside the drawer */
        width: 100%; /* Take full width of drawer */
        height: 100%; /* Take full height of drawer */
        border-radius: 0; /* Remove specific rounded corners if inside drawer */
        box-shadow: none; /* Remove shadow if drawer itself has one */
        background-color: transparent; /* Make background transparent if drawer provides it */
        padding: 0; /* Remove inner padding as drawer provides it */
    }
}

/* Status Log details for accessibility */
#status-log-section-container > details > summary { cursor: pointer; list-style: none; }
#status-log-section-container > details > summary::-webkit-details-marker { display: none; }
#status-log-section-container > details > summary::before { content: '+ '; margin-right: 0.5rem; }
#status-log-details[open] > summary::before { content: '- '; }
